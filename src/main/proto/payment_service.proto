syntax="proto3";

package payment;


option java_multiple_files=true;
option java_package="com.ecomm.grpc.payment";
option java_outer_classname="PaymentProto";

service PaymentService{
  rpc processPayment(paymentRequest) returns (paymentResponse);
  rpc getPaymentStatus(paymentStatusRequest) returns (paymentStatusResponse);
  rpc refundPayment(refundRequest) returns (refundResponse);
}

service ProductService{
  rpc productInventory(productRequest) returns (productResponse);
}

message productRequest{
 string productId=1;
 double price=2;
 uint64 quantity=3;
}

message productResponse{
  string productId=1;
  uint64 quantity=2;
  bool availability=3;
}

message paymentRequest{
  string orderId=1;
  double amount=2;
  string currency=3;
  string customer_email=4;
  string customer_phone=5;
}

message paymentResponse{
string paymentId=1;
double amount=2;
string status=3;
string razor_pay_order_id=4;
string message=5;
}

message paymentStatusRequest{
  string payment_id=1;
}

message paymentStatusResponse{
  string payment_id = 1;
  string status = 2;
  double amount = 3;
  string order_id = 4;
}

message refundRequest {
  string payment_id = 1;
  double amount = 2;
}

message refundResponse {
  string refund_id = 1;
  bool success = 2;
  string message = 3;
}


  message OrderEvent {
    string eventId=1;
    string eventType=2;
    string orderId=3;
    string userId=4;
    OrderEventPayload payload=5;
    }

    message OrderEventPayload {
    string orderId=1;
    string userId=2;
    string customerEmail=3;
    string customerPhone=4;
    double totalAmount=5;
    string currency=6;
    repeated OrderItem items=7;
    string paymentId=8;
    string status=9;
    }


   message OrderItem {
    string productId=1;
    string productName=2;
    int64 quantity=3;
    double price=4;
    }